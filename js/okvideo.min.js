/*
 * OKVideo by OKFocus v1.5.1
 * http://okfoc.us 
 *
 * Copyright 2012, OKFocus
 * Licensed under the MIT license.
 *
 */
var player,OKEvents,options;
(function(a){a.okvideo=function(c){"object"!==typeof c&&(c={source:c});var b=this;b.init=function(){b.options=a.extend({},a.okvideo.options,c);b.options.adproof?a("body").append('<div style="position:fixed;left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;" id="okplayer-mask"></div><div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:110%;width:110%;"></div>'):a("body").append('<div style="position:fixed;left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;" id="okplayer-mask"></div><div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:100%;width:100%;"></div>');b.setOptions();
"youtube"===b.options.source.provider?b.loadYoutubeAPI():"vimeo"===b.options.source.provider&&(b.options.volume/=100,b.loadVimeoAPI())};b.setOptions=function(){for(var e in this.options)!0===this.options[e]&&(this.options[e]=1);b.options.source=b.determineProvider();a(window).data("okoptions",b.options)};b.loadYoutubeAPI=function(){b.insertJS("http://www.youtube.com/player_api")};b.loadVimeoAPI=function(){a("#okplayer").replaceWith(function(){return'<iframe src="http://player.vimeo.com/video/'+b.options.source.id+
"?api=1&js_api=1&title=0&byline=0&portrait=0&playbar=0&loop="+b.options.loop+'&player_id=okplayer" frameborder="0" style="'+a(this).attr("style")+'visibility:hidden;background-color:black;" id="'+a(this).attr("id")+'"></iframe>'});b.insertJS("http://a.vimeocdn.com/js/froogaloop2.min.js",function(){vimeoPlayerReady()})};b.insertJS=function(b,a){var d=document.createElement("script");a&&(d.readyState?d.onreadystatechange=function(){if("loaded"==d.readyState||"complete"==d.readyState)d.onreadystatechange=
null,a()}:d.onload=function(){a()});d.src=b;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,c)};b.determineProvider=function(){var a=document.createElement("a");a.href=b.options.source;if(/youtube.com/.test(b.options.source))return{provider:"youtube",id:a.search.slice(a.search.indexOf("v=")+2)};if(/vimeo.com/.test(b.options.source))return{provider:"vimeo",id:a.pathname.slice(1)};if(/[A-Za-z0-9_]+/.test(b.options.source)){a=new String(b.options.source.match(/[A-Za-z0-9_]+/));
if(11==a.length)return{provider:"youtube",id:a};for(a=0;a<b.options.source.length;a++)if("number"!=typeof parseInt(b.options.source[a]))throw"not vimeo but thought it was for a sec";return{provider:"vimeo",id:b.options.source}}throw"OKVideo: Invalid video source";};b.init()};a.okvideo.options={source:null,disableKeyControl:1,captions:0,loop:1,hd:1,volume:0,adproof:!1,unstarted:null,onFinished:null,onPlay:null,onPause:null,buffering:null,cued:null};a.fn.okvideo=function(c){return this.each(function(){new a.okvideo(c)})}})(jQuery);
function vimeoPlayerReady(){options=$(window).data("okoptions");var a=$("#okplayer")[0];player=$f(a);window.setTimeout($("#okplayer").css("visibility","visible"),2E3);player.addEvent("ready",function(){player.api("play");if("ontouchstart"in window.touchStart)OKEvents.v.onPlay();else player.addEvent("play",OKEvents.v.onPlay())})}
function onYouTubePlayerAPIReady(){options=$(window).data("okoptions");player=new YT.Player("okplayer",{videoId:options.source.id,playerVars:{autohide:1,autoplay:0,disablekb:options.keyControls,cc_load_policy:options.captions,controls:0,enablejsapi:1,fs:0,iv_load_policy:1,loop:options.loop,showinfo:0,rel:0,wmode:"opaque",hd:options.hd},events:{onReady:OKEvents.yt.ready,onStateChange:OKEvents.yt.onStateChange,onError:OKEvents.yt.error}})}
OKEvents={yt:{ready:function(a){a.target.setVolume(options.volume);a.target.playVideo()},onStateChange:function(a){console.log(a.data);switch(a.data){case -1:OKEvents.utils.isFunction(options.unstarted)&&options.unstarted();break;case 0:OKEvents.utils.isFunction(options.onFinished)&&options.onFinished();options.loop&&a.target.playVideo();break;case 1:OKEvents.utils.isFunction(options.onPlay)&&options.onPlay();break;case 2:OKEvents.utils.isFunction(options.onPause)&&options.onPause();break;case 3:OKEvents.utils.isFunction(options.buffering)&&
options.buffering();break;case 5:OKEvents.utils.isFunction(options.cued)&&options.cued();break;default:throw"OKVideo: received invalid data from YT player.";}},error:function(a){throw a;}},v:{onPlay:function(){player.api("api_setVolume",options.volume)}},utils:{isFunction:function(a){if("function"===typeof a)return!0;1===a&&(a=!0);throw"OKVideo: "+a+" must be a function.";}}};
